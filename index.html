<!doctype html>
<meta charset="utf-8">

<div id="left">
  <h1>Type a recipe with volumes</h1>
  <textarea id="recipe-volume">Pretty bad chocolate chip cookies

- 1 cup butter, softened
- 1 cup brown sugar, packed
- 1 cup all-purpose flour
- 1 cup semisweet chocolate chips

Mix all ingredients in a medium bowl. Eat.
</textarea>
</div>

<div id="right">
  <h1>Get a recipe with masses</h1>
<pre id="recipe-mass"></pre>
</div>

<script src="http://coffeescript.org/extras/coffee-script.js"></script>
<script type="text/literate-coffeescript" src="index.litcoffee"></script>
<script src="http://code.jquery.com/jquery-1.9.0.js"></script>
<script type="text/coffeescript">
compile = ->
  $('#recipe-mass').text massimize $('#recipe-volume').val()

$ ->
  $('#recipe-volume').on 'change keyup cut paste', compile
  runOnce = setInterval (->
    if massimize?
      clearInterval(runOnce)
      compile()
      $('#recipe-volume').focus()
  ), 50
</script>

<style>
#left, #right {
  position: absolute;
  top: 0;
  bottom: 0;
}
#left {
  left: 0; right: 50%;
}
#right {
  left: 50%; right: 0;
}

#recipe-volume, #recipe-mass {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  
  font: 1em sans-serif;
  white-space: pre-wrap;
  border: 0;
}
</style>
